# =============================================================================
# Configuração do Supervisor para o Gunicorn (servidor web Django)
# 
# ARQUIVO: /etc/supervisor/conf.d/nitroleads.conf
#
# Este arquivo configura o servidor web Gunicorn que serve a aplicação Django.
# =============================================================================

[program:nitroleads]
# Comando para executar o Gunicorn
command=/home/nitroleads/apps/nitroleads/venv/bin/gunicorn lead_extraction.wsgi:application --bind 127.0.0.1:8000 --workers 3 --timeout 120

# Diretório de trabalho
directory=/home/nitroleads/apps/nitroleads

# Usuário que executa o processo
user=nitroleads

# Iniciar automaticamente quando o supervisor iniciar
autostart=true

# Reiniciar automaticamente se o processo morrer
autorestart=true

# Redirecionar stderr para stdout
redirect_stderr=true

# Arquivo de log
stdout_logfile=/home/nitroleads/logs/nitroleads/gunicorn.log

# Tamanho máximo do arquivo de log (10MB)
stdout_logfile_maxbytes=10MB

# Manter 5 backups dos logs
stdout_logfile_backups=5

# Variáveis de ambiente
environment=PATH="/home/nitroleads/apps/nitroleads/venv/bin"

